<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="../IMG/JD_Web_Solutions.ico">
    <title>Tijdsregistratie</title>
    <script>
        (function () {
            try {
                var pref = localStorage.getItem('app.theme') || 'system';
                var final = pref === 'system'
                    ? (window.matchMedia && matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light')
                    : pref;
                document.documentElement.setAttribute('data-theme', final);
            } catch (e) { }
        })();
    </script>
    <link rel="stylesheet" href="../CSS/main.css">
    <link rel="stylesheet" href="../CSS/components-menu.css">
    <link rel="stylesheet" href="../CSS/components-sidemenu.css">
    <link rel="stylesheet" href="../CSS/page-time.css">
</head>

<body class="time-page">
    <!-- AUTH -->
    <div id="auth"><button id="login-btn">ğŸ” Inloggen met Google</button></div>

    <!-- gedeelde header -->
    <div data-include="../partials/header.html"></div>

    <!-- APP -->
    <div id="app" style="display:none;">
        <div class="page" id="timeRoot">
            <main class="content">
                <section class="card toolbar">
                    <div class="toolbar-row">
                        <label>
                            Maand:
                            <input id="monthPicker" type="month">
                        </label>
                        <button id="btnExportPdf" class="primary" title="Exporteer naar PDF">ğŸ“„ Exporteren PDF</button>

                        <div class="spacer"></div>

                        <!-- Quick actions voor speciale registraties -->
                        <div class="quick-actions">
                            <button class="ghost qa" data-type="sport">ğŸƒ Sport</button>
                            <button class="ghost qa" data-type="feestdag">ğŸ‰ Feestdag</button>
                            <button class="ghost qa" data-type="recup">ğŸ” Recup</button>
                            <button class="ghost qa" data-type="verlof">ğŸŒ´ Verlof</button>
                            <button class="ghost qa" data-type="oefening">ğŸ§¯ Oefening</button>
                            <button class="ghost qa" data-type="interventie">ğŸš’ Interventie</button>

                            <button class="ghost qa" data-type="andere">ğŸ§© Andere</button>
                        </div>
                    </div>
                </section>

                <section class="card">
                    <div class="table-wrap">
                        <table id="timeTable" class="time-table" aria-describedby="tableHelp">
                            <thead>
                                <tr>
                                    <th style="width:120px;">Datum</th>
                                    <th style="width:80px;">Start</th>
                                    <th style="width:110px;">Start pauze</th>
                                    <th style="width:110px;">Einde pauze</th>
                                    <th style="width:80px;">Einde</th>
                                    <th style="width:90px;">Uren</th>
                                    <th>Opmerking</th>
                                </tr>
                            </thead>
                            <tbody><!-- rows via JS --></tbody>
                        </table>
                        <p id="tableHelp" class="muted" style="margin:.6rem 0 0;">
                            Klik op een rij om te bewerken. Weektotalen worden automatisch ingevoegd.
                        </p>
                    </div>
                </section>
            </main>

            <aside class="rightcol">
                <!-- optioneel: leeg laten voor consistente lay-out -->
            </aside>
        </div>
    </div>

    <!-- Pagina-specifieke modal -->
    <div id="modal-time" class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modal-time-title" hidden>
        <div class="modal-header">
            <h3 id="modal-time-title">Tijdsregistratie</h3>
            <button class="modal-close" data-modal-close="modal-time" aria-label="Sluiten">âœ•</button>
        </div>

        <div class="modal-body">
            <div class="form-grid">
                <label class="fld fld-date">Datum
                    <input id="tr-date" type="date">
                </label>

                <label class="fld fld-type">Type
                    <select id="tr-type">
                        <option value="standard">Standaard</option>
                        <option value="sport">Sport</option>
                        <option value="feestdag">Feestdag</option>
                        <option value="recup">Recup</option>
                        <option value="verlof">Verlof</option>
                        <option value="oefening">Oefening</option>
                        <option value="interventie">Interventie</option>
                        <option value="andere">Andere</option>
                    </select>
                </label>

                <label class="fld fld-start">Start
                    <input id="tr-start" type="time" step="60">
                </label>

                <label class="fld fld-beginbreak">Start pauze
                    <input id="tr-beginbreak" type="time" step="60">
                </label>

                <label class="fld fld-endbreak">Einde pauze
                    <input id="tr-endbreak" type="time" step="60">
                </label>

                <label class="fld fld-end">Einde
                    <input id="tr-end" type="time" step="60">
                </label>

                <label class="fld fld-remark">Opmerking
                    <textarea id="tr-remark" placeholder="bv. Sport 15u - 17u, ..."></textarea>
                </label>
            </div>
        </div>

        <div class="modal-footer">
            <button id="tr-save" class="primary">ğŸ’¾ Opslaan</button>
            <button id="tr-delete" class="danger" style="display:none;">ğŸ—‘ï¸ Verwijderen</button>
            <button class="ghost" data-modal-close="modal-time">Annuleren</button>
        </div>
    </div>

    <!-- gedeelde modals (alert, ...) -->
    <div data-include="../partials/modals.html"></div>
    <script type="module" src="../script/javascript/modal.js"></script>

    <!-- Eerst includes, dan menu, dan tijdsregistratie -->
    <script src="../script/javascript/include-partials.js"></script>
    <script src="../script/javascript/menu.js"></script>

    <!-- jsPDF + AutoTable -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.2/dist/jspdf.plugin.autotable.min.js"></script>


    <script type="module" src="../script/javascript/time.js"></script>
</body>

</html>